function MoveBalls(a,d){var c=document.querySelector(a);this.canvas=c;this.ctx=c.getContext("2d");var e={total:300,color:"#AAAAAA",size:2,width:this.canvas.parentNode.clientWidth,height:this.canvas.parentNode.clientHeight};var d=d||e;for(var b in d){e[b]=d[b]}for(var b in e){this[b]=e[b]}d=null;e=null;this.coordinate={x:null,y:null,max:100};this.dots=[];this.newDots=[];this.count=0;window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(f){window.setTimeout(f,1000/60)};this.colorReg=/[rgba()]/g;this.init()}MoveBalls.prototype={constructor:MoveBalls,init:function(){var b=this;this.freshResize();this.mouseEvent();this.getDots();var a=setTimeout(function(){clearTimeout(a);b.draw(b)},100)},colorCheck:function(){this.canvas.style.color=this.color;var a=this.canvas.style.color;return a=a.replace(this.colorReg,"").split(",")},resize:function(a){var b=a||this;b.canvas.width=b.width;b.canvas.height=b.height},freshResize:function(){this.resize();var a=this;window.addEventListener("resize",function(){a.resize(a)})},mouseEvent:function(){var a=this;window.addEventListener("mousemove",function(b){var b=b||winodw.event;a.coordinate.x=b.clientX;a.coordinate.y=b.clientY});window.addEventListener("mouseout",function(){a.coordinate.x=null;a.coordinate.y=null})},getDots:function(){while(this.count<this.total){var a=Math.random()*this.canvas.width;var d=Math.random()*this.canvas.height;var b=Math.random()*2-1;var c=Math.random()*2-1;this.dots.push({x:a,y:d,xMove:b,yMove:c,max:100});this.count++}},draw:function(b){var c=b||this;var a=c.ctx;a.clearRect(0,0,c.canvas.width,c.canvas.height);c.newDots=[c.coordinate].concat(c.dots);c.dots.forEach(function(g){g.xMove*=(g.x>c.canvas.width||g.x<0)?-1:1;g.yMove*=(g.y>c.canvas.height||g.y<0)?-1:1;g.x+=g.xMove;g.y+=g.yMove;a.save();a.beginPath();a.arc(g.x,g.y,c.size,0,Math.PI*2);a.fillStyle=c.color;a.fill();a.restore();for(var h=0;h<c.newDots.length;h++){var d=c.newDots[h];if(d===g||d.x===null||d.y===null){continue}var f=g.x-d.x;var k=g.y-d.y;var l=Math.sqrt(Math.pow(f,2)+Math.pow(k,2));var e=0;if(l<=d.max){if(d===c.coordinate&&l>(d.max/2)){g.x-=f*0.03;g.y-=k*0.03}e=(d.max-l)/d.max;a.save();a.beginPath();a.lineWidth=e/2;var j=c.colorCheck();a.strokeStyle="rgba("+j[0]+", "+j[1]+", "+j[2]+","+(e+0.4)+")";a.moveTo(g.x,g.y);a.lineTo(d.x,d.y);a.stroke();a.restore()}}c.newDots.splice(c.newDots.indexOf(g),1)});window.requestAnimationFrame(function(d){c.draw(c)})}};
